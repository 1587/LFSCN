<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      6.50.&nbsp;IPRoute2-3.6.0
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-SVN-20121128">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 SVN-20121128
      </h4>
      <h3>
        第&nbsp;6&nbsp;章&nbsp;安装基本系统软件
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="gzip.html" title="Gzip-1.5">上一页</a>
          <p>
            Gzip-1.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="kbd.html" title="Kbd-1.15.3">下一页</a>
          <p>
            Kbd-1.15.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121128">起始页</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-system-iproute2" name="ch-system-iproute2"></a>6.50.
        IPRoute2-3.6.0
      </h1>
      <div class="package" lang="zh-cn" xml:lang="zh-cn">
        <p>
          IPRoute2 程序包包含用于 IPv4 网络的基本和高级程序。
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">预计编制时间：</strong><span class=
              "segbody">0.1 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">需求磁盘空间：</strong><span class=
              "segbody">7.3 MB</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          6.50.1. 安装 IPRoute2
        </h2>
        <p>
          应用一个补丁修复一个由 iptables 程序包缺失造成的编译问题：
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../iproute2-3.6.0-ipset-1.patch</kbd>
</pre>
        <p>
          此程序包包含的 <span class="command"><strong>arpd</strong></span> 二进制依赖
          Berkeley DB。因为 <span class="command"><strong>arpd</strong></span>
          对于基本 Linux 系统来说不是必要的，应用以下命令移除对 Berkeley DB 的依赖。如果需要 <span class=
          "command"><strong>arpd</strong></span> 这个二进制，编译 Berkeley DB 的指令位于
          BLFS 中的 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs/view/svn/server/databases.html#db">
          http://www.linuxfromscratch.org/blfs/view/svn/server/databases.html#db</a>。
        </p>
        <pre class="userinput">
<kbd class="command">sed -i '/^TARGETS/s@arpd@@g' misc/Makefile
sed -i /ARPD/d Makefile
sed -i 's/arpd.8//' man/man8/Makefile</kbd>
</pre>
        <p>
          编译程序包：
        </p>
        <pre class="userinput">
<kbd class="command">make DESTDIR=</kbd>
</pre>
        <div class="variablelist">
          <p class="title">
            <b>make 选项的含义</b>
          </p>
          <dl>
            <dt>
              <span class="term"><em class=
              "parameter"><code>DESTDIR=</code></em></span>
            </dt>
            <dd>
              <p>
                此项确保 IPRoute2 的二进制安装到正确的目录。<em class=
                "parameter"><code>DESTDIR</code></em> 默认设置为 <code class=
                "filename">/usr</code>。
              </p>
            </dd>
          </dl>
        </div>
        <p>
          此程序包带有测试套件，但由于它所做的一些假设，在 chroot 环境中可靠运行是不可能的。如果你要在引导到新的 LFS
          系统之后运行这些测试，确保你在内核中选中 <code class="filename">/proc/config.gz</code>
          CONFIG_IKCONFIG_PROC (位于 "General setup" -&gt; "Enable access to
          .config through /proc/config.gz") 支持，然后在 <code class=
          "filename">testsuite/</code> 子目录中执行 make alltests.
        </p>
        <p>
          安装程序包：
        </p>
        <pre class="userinput">
<kbd class="command">make DESTDIR=              \
     MANDIR=/usr/share/man \
     DOCDIR=/usr/share/doc/iproute2-3.6.0 install</kbd>
</pre>
      </div>
      <div class="content" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          <a id="contents-iproute2" name="contents-iproute2"></a>6.50.2.
          IPRoute2 的内容
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">安装的程序：</strong><span class=
              "segbody">bridge、ctstat (到 lnstat
              的链接)、genl、ifcfg、ifstat、ip、lnstat、nstat、routef、routel、rtacct、rtmon、rtpr、rtstat
              (到 lnstat 的链接)、ss 和 tc</span>
            </div>
            <div class="seg">
              <strong class="segtitle">安装的库：</strong><span class=
              "segbody">/etc/iproute2、/lib/tc、/usr/share/doc/iproute2-3.6.0、/usr/lib/tc</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            简介
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="bridge" name="bridge"></a><span class=
                    "term"><span class=
                    "command"><strong>bridge</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    配置网络桥
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ctstat" name="ctstat"></a><span class=
                    "term"><span class=
                    "command"><strong>ctstat</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    连接状态工具
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="genl" name="genl"></a><span class=
                    "term"><span class=
                    "command"><strong>genl</strong></span></span>
                  </p>
                </td>
                <td></td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ifcfg" name="ifcfg"></a><span class=
                    "term"><span class=
                    "command"><strong>ifcfg</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    <span class="command"><strong>ip</strong></span> 命令的一个
                    shell 脚本打包；注意它需求 <span class=
                    "command"><strong>arping</strong></span> 和 <span class=
                    "command"><strong>rdisk</strong></span> 程序；这些程序来自 iputils
                    程序包，位于 <a class="ulink" href=
                    "http://www.skbuff.net/iputils/">http://www.skbuff.net/iputils/</a>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ifstat" name="ifstat"></a><span class=
                    "term"><span class=
                    "command"><strong>ifstat</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示接口统计数据，包括其发送和接收的数据包
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ip" name="ip"></a><span class="term"><span class=
                    "command"><strong>ip</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    主可执行文件，有几个不同的功能：
                  </p>
                  <p>
                    <span class="command"><strong>ip link <em class=
                    "replaceable"><code>&lt;dev&gt;</code></em></strong></span>
                    允许用户查看设备状态并作出改动
                  </p>
                  <p>
                    <span class="command"><strong>ip addr</strong></span>
                    允许用户查看地址和属性、添加地址和删除旧地址
                  </p>
                  <p>
                    <span class="command"><strong>ip neighbor</strong></span>
                    允许用户查看邻居绑定和属性、添加邻居和删除旧邻居
                  </p>
                  <p>
                    <span class="command"><strong>ip rule</strong></span>
                    允许用户查看路由政策并调整之
                  </p>
                  <p>
                    <span class="command"><strong>ip route</strong></span>
                    允许用户查看路由表并修改其规则
                  </p>
                  <p>
                    <span class="command"><strong>ip tunnel</strong></span>
                    允许用户查看 IP 隧道及其属性并修改之
                  </p>
                  <p>
                    <span class="command"><strong>ip maddr</strong></span>
                    允许用户查看多播地址及其属性并修改之
                  </p>
                  <p>
                    <span class="command"><strong>ip mroute</strong></span>
                    允许用户设置、修改或删除多播路由
                  </p>
                  <p>
                    <span class="command"><strong>ip monitor</strong></span>
                    允许用户持续监视设备状态、地址和路由
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="lnstat" name="lnstat"></a><span class=
                    "term"><span class=
                    "command"><strong>lnstat</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    提供 Linux 网络统计数据；比老式的 <span class=
                    "command"><strong>rtstat</strong></span> 程序更加通用和完善
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nstat" name="nstat"></a><span class=
                    "term"><span class=
                    "command"><strong>nstat</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示网络统计数据
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="routef" name="routef"></a><span class=
                    "term"><span class=
                    "command"><strong>routef</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    <span class="command"><strong>ip route</strong></span>
                    的一个组件；用于刷写路由表
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="routel" name="routel"></a><span class=
                    "term"><span class=
                    "command"><strong>routel</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    <span class="command"><strong>ip route</strong></span>
                    的一个组件；用于列出路由表
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rtacct" name="rtacct"></a><span class=
                    "term"><span class=
                    "command"><strong>rtacct</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示 <code class="filename">/proc/net/rt_acct</code> 的内容
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rtmon" name="rtmon"></a><span class=
                    "term"><span class=
                    "command"><strong>rtmon</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    路由监视工具
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rtpr" name="rtpr"></a><span class=
                    "term"><span class=
                    "command"><strong>rtpr</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    将 <span class="command"><strong>ip -o</strong></span>
                    的输出转换为可读格式
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rtstat" name="rtstat"></a><span class=
                    "term"><span class=
                    "command"><strong>rtstat</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    路由状态工具
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ss" name="ss"></a><span class="term"><span class=
                    "command"><strong>ss</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    类似 <span class="command"><strong>netstat</strong></span>
                    命令；显示活动的连接
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="tc" name="tc"></a><span class="term"><span class=
                    "command"><strong>tc</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    流量控制程序；用于 QOS 和 COS 的实现
                  </p>
                  <p>
                    <span class="command"><strong>tc qdisc</strong></span>
                    允许用户设置队列原则
                  </p>
                  <p>
                    <span class="command"><strong>tc class</strong></span>
                    允许用户基于队列原则设置类
                  </p>
                  <p>
                    <span class="command"><strong>tc
                    estimator</strong></span> 允许用户估计网络上的流量
                  </p>
                  <p>
                    <span class="command"><strong>tc filter</strong></span>
                    允许用户设置 QOS/COS 数据包筛选
                  </p>
                  <p>
                    <span class="command"><strong>tc policy</strong></span>
                    允许用户设置 QOS/COS 政策
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="gzip.html" title="Gzip-1.5">上一页</a>
          <p>
            Gzip-1.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="kbd.html" title="Kbd-1.15.3">下一页</a>
          <p>
            Kbd-1.15.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121128">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
