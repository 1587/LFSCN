<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="space-creatingpartition">
  <?dbhtml filename="creatingpartition.html"?>

  <title>新建一个分区</title>

  <para>像大多数操作系统一样，LFS 系统通常被安装在一个磁盘分区上。我们建议使用一个空的分区构建一个 LFS 系统，或者，如果你有足够多的未分配空间，新建一个分区。</para>

<!--

  <para>It is possible to install an LFS system (in fact even multiple LFS
  systems) on a partition already occupied by another
  operating system and the different systems will co-exist peacefully. The
  document <ulink url="&hints-root;lfs_next_to_existing_systems.txt"/>
  contains notes on how to implement this. This document was last updated
  in 2004. It has not been updated since and it has not been tested with
  recent versions of this LFS book. The document is more than likely not
  usable as-is and you will need to account for changes made to the LFS
  procedures since it was written. This is only recommended for expert LFS
  users.</para>

-->

  <para>一个最小的系统需要一个至少 2.8GB 大的分区。这使得我们有足够的空间存储我们的软件包并进行编译。然而，如果你想要在这个 LFS 系统之上安装其他的软件，额外的空间必不可少。一个 10GB 的分区是比较合理的。LFS 系统本身并不使用这么大的空间，但是编译一些软件的时候需要比较大的临时空间。</para>

  <para>如果用户没有足够大的内存 (RAM) 进行编译，一个比较好的解决方法是使用 <systemitem class="filesystem">swap</systemitem> 空间。内核使用这个机制提供更大的可用内存。LFS 系统可以与宿主系统使用同一个 <systemitem class="filesystem">swap</systemitem> 分区，所以我们没有必要重新创建一个。</para>

  <para>使用磁盘分区工具 <command>cfdisk</command> 或者 <command>fdisk</command> 并将你希望使用的硬盘作为命令行参数传入&mdash;例如，<filename class="devicefile">/dev/hda</filename> 代表第一块 IDE 硬盘。请根据需要创建一个 Linux 分区，或者 <systemitem class="filesystem">swap</systemitem> 分区。如果你不知道如何使用这两个工具，请查阅 man 手册 <filename>cfdisk(8)</filename> 或者 <filename>fdisk(8)</filename> 了解更多使用方法。</para>

  <para>请记住你将使用的分区 (例如<filename class="devicefile">hda5</filename>)。这本书将这个分区称作 LFS 分区。同样记住 <systemitem class="filesystem">swap</systemitem> 分区的名称。这些名称会在 <filename>/etc/fstab</filename> 文件中用到。</para>

  <sect2>
  <title>Other Partition Issues</title>

  <para>Requests for advice on system partitioning are often posted on the LFS mailing 
  lists.  This is a highly subjective topic.  The default for most distributions
  is to use the entire drive with the exception of one small swap partition.  This
  is not optimal for LFS for several reasons.  It reduces flexibility, makes 
  sharing of data across multiple distributions or LFS builds more difficult, makes
  backups more time consuming, and can waste disk space through inefficient 
  allocation of file system structures.</para>

    <sect3>
    <title>The Root Partition</title>
   
    <para>A root LFS partition (not to be confused with the
    <filename class="directory">/root</filename> directory) of
    ten gigabytes is a good compromise for most systems.  It provides enough
    space to build LFS and most of BLFS, but is small enough so that multiple
    partitions can be easily created for experimentation.</para> </sect3>
   
    <sect3>
    <title>The Swap Partition</title>
   
    <para>Most distributions automatically create a swap partition.  Generally
    the recommended size of the swap partition is about twice the amount of
    physical RAM, however this is rarely needed.  If disk space is limited,
    hold the swap partition to two gigabytes and monitor the amount of disk
    swapping.</para>
   
    <para>Swapping is never good.  Generally you can tell if a system is
    swapping by just listening to disk activity and observing how the system
    reacts to commands.  The first reaction to swapping should be to check for
    an unreasonable command such as trying to edit a five gigabyte file.  If
    swapping becomes a normal occurance, the best solution is to purchase more
    RAM for your system.</para> </sect3>
   
    <sect3>
    <title>Convenience Partitions</title>
   
    <para>There are several other partitions that are not required, but should
    be considered when designing a disk layout.  The following list
    is not comprehensive, but is meant as a guide.</para>
   
    <itemizedlist>
      
      <listitem><para>/boot &ndash; Highly recommended.  Use this partition to
      store kernels and other booting information.  To minimize potential boot
      problems with larger disks, make this the first physical partition on
      your first disk drive.  A partition size of 100 megabytes is quite
      adequate.</para></listitem>
      
      <listitem><para>/home &ndash; Highly recommended.  Share your home
      directory and user customization across multiple distributions or LFS
      builds.  The size is generally fairly large and depends on available disk
      space.</para></listitem>
      
      <listitem><para>/usr &ndash; A separate /usr partition is generally used
      if providing a server for a thin client or diskless workstation.  It is
      normally not needed for LFS.  A size of five gigabytes will handle most
      installations.</para></listitem>
      
      <listitem><para>/opt &ndash; This directory is most useful for
      BLFS where multiple installations of large packages like Gnome or KDE can
      be installed without embedding the files in the /usr hierarchy.  If
      used, five to ten gigabytes is generally adequate.</para>
      </listitem>
      
      <listitem><para>/tmp &ndash; A separate /tmp directory is rare, but
      useful if configuring a thin client.  This partition, if used, will
      usually not need to exceed a couple of gigabytes.</para></listitem>
      
      <listitem><para>/usr/src &ndash; This partition is very
      useful for providing a location to store BLFS source files and
      share them across LFS builds.  It can also be used as a location
      for building BLFS packages.  A reasonably large partition of 30-50
      gigabytes allows plenty of room.</para></listitem>
   
    </itemizedlist>
   
    <para>Any separate partition that you want automatically mounted upon boot
    needs to be specified in the <filename>/etc/fstab</filename>.  Details
    about how to specify partitions will be discussed in <xref
    linkend="ch-bootable-fstab"/>.  </para>
   
    </sect3>
  </sect2>
</sect1>
