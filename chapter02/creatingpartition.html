<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      2.2.&nbsp;创建一个新分区
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-SVN-20121103">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 SVN-20121103
      </h4>
      <h3>
        第&nbsp;2&nbsp;章&nbsp;准备新分区
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title="介绍">上一页</a>
          <p>
            介绍
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="creatingfilesystem.html" title=
          "在新分区上创建文件系统">下一页</a>
          <p>
            在新分区上创建文件系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "第&nbsp;2&nbsp;章&nbsp;准备新分区">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121103">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="space-creatingpartition" name=
        "space-creatingpartition"></a>2.2. 创建一个新分区
      </h1>
      <p>
        与大多数操作系统相同，LFS 系统通常安装在一个指定的磁盘分区上。我们建议使用一个空的分区构建 LFS
        系统，或者，如果有足够多的未分配空间，新建一个分区。
      </p>
      <p>
        一个最小的系统分区至少要有 2.8GB 大。这些空间足够我们存储软件包并进行编译。然而，如果你想要在这个 LFS
        系统之上安装其他的软件，就需要更大的空间。一个 10GB 的分区是比较合理的。LFS
        系统本身并不使用这么大的空间，但是编译一些软件的时候会占用比较大的临时空间，这些空间在程序包安装后可以释放。
      </p>
      <p>
        如果没有足够大的 RAM 进行编译，一个比较好的解决方法是使用 <code class="systemitem">swap</code>
        空间。内核用它存储不常用的数据并将更多内存留给活动进程使用。LFS 系统可以与宿主系统使用同一个 <code class=
        "systemitem">swap</code> 分区，没有必要重新创建一个。
      </p>
      <p>
        使用磁盘分区工具 <span class="command"><strong>cfdisk</strong></span> 或者
        <span class="command"><strong>fdisk</strong></span>
        并将你希望使用的硬盘作为命令行参数传入——例如，<code class="filename">/dev/hda</code> 代表第一块
        IDE 硬盘。请根据需要创建 Linux 分区和 <code class="systemitem">swap</code>
        分区。如果你不知道如何使用这两个工具，请查阅手册 <code class="filename">cfdisk(8)</code> 或者
        <code class="filename">fdisk(8)</code>。
      </p>
      <div class="admon note">
        <img alt="[注意]" src="../images/note.png" />
        <h3>
          注意
        </h3>
        <p>
          对有经验的用户来说，还有其他分区方案可供选择。新的 LFS 系统可以存在于软件 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/raid.html">RAID</a>
          阵列或者 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/aboutlvm.html">
          LVM</a> 逻辑卷上。然而，其中某些选项需要使用 <a class="ulink" href=
          "http://www.linuxfromscratch.org/blfs//view/svn/postlfs/initramfs.html">
          initramfs</a>，这就是高级的话题了。这些分区方法对于第一次接触 LFS 的用户并不推荐。
        </p>
      </div>
      <p>
        请记住你将使用的分区 (例如 <code class="filename">hda5</code>)。本书将此分区称作 LFS
        分区。同样，记住 <code class="systemitem">swap</code> 分区的名称。这些名称会在
        <code class="filename">/etc/fstab</code> 文件中用到。
      </p>
      <div class="sect2" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          2.2.1. 其他分区问题
        </h2>
        <p>
          LFS
          邮件列表中经常有人寻求系统分区建议。这是一个很主观的话题。多数发行版默认扣出一个小的交换分区然后使用整个驱动器。出于如下原因，这种做法对
          LFS 并不理想：它会削弱灵活性、使得在多个发行版或 LFS
          编制之间共享数据变得困难、使备份消耗更多时间并且把磁盘空间浪费在低效率的文件系统结构分布上。
        </p>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.1. 根分区
          </h3>
          <p>
            LFS 根分区 (不要与 <code class="filename">/root</code> 目录混淆) 有 10GB
            对多数系统已经足够了。它提供足够空间来编制 LFS 和 BLFS 的大部分，又小到可以很容易地创建多个分区用于实验。
          </p>
        </div>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.2. swap 分区
          </h3>
          <p>
            很多发行版会自动创建 <code class="systemitem">swap</code> 分区。通常推荐
            <code class="systemitem">swap</code> 分区相当于 RAM
            的两倍大，但这其实很少用到。如果磁盘空间有限，将其尺寸限制到 2GB，并监视其用量。
          </p>
          <p>
            交换从来就不是好现象。通常只要听磁盘活动并观察系统对命令的响应即可判断它是否在交换。发现交换的第一反应应该是检查是否在运行没有道理的命令，比如试图编辑
            5GB 大的文件。如果交换经常发生，最好的解决方式应该是给电脑加装 RAM。
          </p>
        </div>
        <div class="sect3" lang="zh-cn" xml:lang="zh-cn">
          <h3 class="sect3">
            2.2.1.3. 便捷分区
          </h3>
          <p>
            还有几个不强制要求的分区，在设计磁盘布局的时候应该考虑一下。以下列表可能不全面，仅供参考。
          </p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
                  <code class="filename">/boot</code> ––
                  高度推荐。用这个分区来存放内核和其他引导信息。为了减少大磁盘的间歇引导问题，把此分区作为磁盘上的第一个物理分区。有
                  100MB 就足够了。
                </p>
              </li>
              <li>
                <p>
                  <code class="filename">/home</code> –– 高度推荐。在多个发行版或 LFS
                  编制之间共享主目录和用户自定义配置。通常尺寸很大，取决与可用磁盘空间。
                </p>
              </li>
              <li>
                <p>
                  <code class="filename">/usr</code> –– 独立的 <code class=
                  "filename">/usr</code> 分区通常用于小客户端或无磁盘工作站的服务器。LFS 中通常不需要。5GB
                  的尺寸可以容纳多数安装。
                </p>
              </li>
              <li>
                <p>
                  <code class="filename">/opt</code> –– 此目录在 BLFS 中多重安装
                  Gnome、KDE 等大程序包而不用将文件嵌入 <code class="filename">/usr</code>
                  目录时最有用。如果需要，5-10GB 通常很适宜。
                </p>
              </li>
              <li>
                <p>
                  <code class="filename">/tmp</code> –– 独立的 /tmp
                  目录很少见，但是在配置小客户端时很有用。此分区如果使用，通常不必超过几 GB。
                </p>
              </li>
              <li>
                <p>
                  <code class="filename">/usr/src</code> ––
                  此分区非常有用，可以提供一个位置来存放 BLFS 源文件并在 LFS 编制之间共享。它也可以用作编译 BLFS
                  程序包的位置。大到 30-50GB 不无道理，此处需要充足的空间。
                </p>
              </li>
            </ul>
          </div>
          <p>
            你想在引导时自动挂载的任何分区都要在 <code class="filename">/etc/fstab</code>
            中指定。关于如何指定分区的细节位于 <a class="xref" href="../chapter08/fstab.html"
            title="8.2.&nbsp;创建 /etc/fstab 文件">第&nbsp;8.2&nbsp;节 “创建
            /etc/fstab 文件”</a>。
          </p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title="介绍">上一页</a>
          <p>
            介绍
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="creatingfilesystem.html" title=
          "在新分区上创建文件系统">下一页</a>
          <p>
            在新分区上创建文件系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "第&nbsp;2&nbsp;章&nbsp;准备新分区">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121103">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
