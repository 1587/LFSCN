<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      5.3.&nbsp;通用编译指令
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-SVN-20121103">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 SVN-20121103
      </h4>
      <h3>
        第&nbsp;5&nbsp;章&nbsp;搭建临时系统
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="toolchaintechnotes.html" title=
          "工具链技术注记">上一页</a>
          <p>
            工具链技术注记
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="binutils-pass1.html" title=
          "Binutils-2.22 - 第一遍">下一页</a>
          <p>
            Binutils-2.22 - 第一遍
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;搭建临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121103">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-tools-generalinstructions" name=
        "ch-tools-generalinstructions"></a>5.3. 通用编译指令
      </h1>
      <p>
        在编制程序包时，指令中包含几个前提：
      </p>
      <div class="itemizedlist">
        <ul>
          <li>
            <p>
              有几个程序包在编译之前要打补丁，但是只是在需要它来解决问题时才要求如此做。在本章和下一章中通常都会用到补丁。因此，如果下载的某个补丁对应的指令似乎丢失，不要困扰。有关
              <span class="strong"><strong>offset</strong></span> 或者
              <span class="strong"><strong>fuzz</strong></span>
              的警告信息可能在应用补丁的时候也会遇到。不要担心，补丁依然成功应用了。
            </p>
          </li>
          <li>
            <p>
              编译多数程序包时，会有一些警告在屏幕上滚动。这很正常，可以安全地忽略。这些警告如它们所说——有关不推荐但并非不可用的 C 或
              C++ 语法。C 标准经常变更，有的程序包仍然使用旧的标准。这不是问题，但确实会产生警告。
            </p>
          </li>
          <li>
            <p>
              最后检查一次 <code class="envar">LFS</code> 环境变量是否设置正确：
            </p>
            <pre class="userinput">
<kbd class="command">echo $LFS</kbd>
</pre>
            <p>
              确保输出显示的是到 LFS 分区挂载点的路径，在我们的例子中是 <code class=
              "filename">/mnt/lfs</code>。
            </p>
          </li>
          <li>
            <p>
              最后强调两点：
            </p>
            <div class="admon important">
              <img alt="[重要]" src="../images/important.png" />
              <h3>
                重要
              </h3>
              <p>
                编制指令要求使用 <span class="command"><strong>bash</strong></span>
                shell。
              </p>
            </div>
            <div class="admon important">
              <img alt="[重要]" src="../images/important.png" />
              <h3>
                重要
              </h3>
              <p>
                重新强调编制进程：
              </p>
              <div class="orderedlist">
                <ol class="compact">
                  <li>
                    <p>
                      把所有的源代码和补丁放在 <span class=
                      "command"><strong>chroot</strong></span> 环境以内的一个目录，比如
                      <code class=
                      "filename">/mnt/lfs/sources/</code>。<span class=
                      "strong"><strong>不要</strong></span>把源代码放在 <code class=
                      "filename">/mnt/lfs/tools/</code> 中。
                    </p>
                  </li>
                  <li>
                    <p>
                      变更至源代码目录。
                    </p>
                  </li>
                  <li>
                    <p>
                      <a id="buildinstr" name="buildinstr"></a>对于每个程序包：
                    </p>
                    <div class="orderedlist">
                      <ol class="compact">
                        <li>
                          <p>
                            使用 <span class=
                            "command"><strong>tar</strong></span>
                            程序，提取要编制的程序包。在第五章中，确保作为 <span class=
                            "emphasis"><em>lfs</em></span> 用户提取程序包。
                          </p>
                        </li>
                        <li>
                          <p>
                            变更至提取程序包时创建的目录。
                          </p>
                        </li>
                        <li>
                          <p>
                            按本书中的指令编制程序包。
                          </p>
                        </li>
                        <li>
                          <p>
                            变更回源代码目录。
                          </p>
                        </li>
                        <li>
                          <p>
                            除非另外说明，删除提取出的源代码目录和任何在编制进程中创建的 <code class=
                            "filename"><em class=
                            "replaceable"><code>&lt;package&gt;</code></em>-build</code>
                            目录。
                          </p>
                        </li>
                      </ol>
                    </div>
                  </li>
                </ol>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="toolchaintechnotes.html" title=
          "工具链技术注记">上一页</a>
          <p>
            工具链技术注记
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="binutils-pass1.html" title=
          "Binutils-2.22 - 第一遍">下一页</a>
          <p>
            Binutils-2.22 - 第一遍
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;搭建临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 SVN-20121103">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
